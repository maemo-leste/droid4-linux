// SPDX-License-Identifier: GPL-2.0-only
/dts-v1/;

#include "motorola-mapphone-handset.dtsi"

/ {
	/* LCD panel controller regulator from vsimcard source */
	lcd_regulator: regulator-lcd-0 {
		compatible = "regulator-fixed";
		regulator-name = "panel_ctrl";
		regulator-min-microvolt = <2900000>;
		regulator-max-microvolt = <2900000>;
		vin-supply = <&vsimcard>;
		gpio = <&gpio6 12 GPIO_ACTIVE_HIGH>;	/* gpio_172 */
		enable-active-high;
	};

	/* LCD regulator from vsimcard source */
	vpnl_regulator: regulator-lcd-1 {
		compatible = "regulator-fixed";
		regulator-name = "lcd";
		regulator-min-microvolt = <2900000>;
		regulator-max-microvolt = <2900000>;
		vin-supply = <&vsimcard>;
		gpio = <&gpio2 11 GPIO_ACTIVE_HIGH>;	/* gpio_43 */
	};
};

&dsi1 {
	status = "okay";
	vdd-supply = <&vcsi>;

	port {
		dsi1_out_ep: endpoint {
			remote-endpoint = <&lcd0_in>;
			lanes = <0 1 2 3 4 5>;
		};
	};

	/* The LCD backlight on razr xt91x is integrated mipi dsi backlight */
	lcd0: panel@0 {
		compatible = "motorola,razr-xt910-panel", "panel-dsi-cm";
		reg = <0>;
		label = "lcd0";
		reset-gpios = <&gpio4 5 GPIO_ACTIVE_HIGH>;	/* gpio101 */
		vddi-supply = <&lcd_regulator>;
		vpnl-supply = <&vpnl_regulator>;

		width-mm = <50>;
		height-mm = <89>;
		rotation = <90>;

		panel-timing {
			clock-frequency = <0>;		/* Calculated by dsi */

			hback-porch = <2>;
			hactive = <540>;
			hfront-porch = <0>;
			hsync-len = <2>;

			vback-porch = <1>;
			vactive = <960>;
			vfront-porch = <0>;
			vsync-len = <1>;

			hsync-active = <0>;
			vsync-active = <0>;
			de-active = <1>;
			pixelclk-active = <1>;
		};

		port {
			lcd0_in: endpoint {
				remote-endpoint = <&dsi1_out_ep>;
			};
		};
	};
};

&keypad {
	keypad,num-rows = <8>;
	keypad,num-columns = <8>;
	linux,keymap = <MATRIX_KEY(5, 0, KEY_VOLUMEUP)>,
		       <MATRIX_KEY(3, 0, KEY_VOLUMEDOWN)>;
};

/* Used by the LCD */
&vsimcard {
	regulator-min-microvolt = <2900000>;
	regulator-max-microvolt = <2900000>;
};
